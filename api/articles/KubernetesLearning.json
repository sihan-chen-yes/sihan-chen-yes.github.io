{"title":"KubernetesLearning","uid":"5e8c2b7b04127754c5a977ce1b671861","slug":"KubernetesLearning","date":"2023-03-02T08:30:56.000Z","updated":"2023-03-02T08:33:45.714Z","comments":true,"path":"api/articles/KubernetesLearning.json","keywords":null,"cover":"/post/KubernetesLearning/cover.jpg","content":"<h1 id=\"Kubernetes\"><a href=\"#Kubernetes\" class=\"headerlink\" title=\"Kubernetes\"></a>Kubernetes</h1><h2 id=\"常用指令\"><a href=\"#常用指令\" class=\"headerlink\" title=\"常用指令\"></a>常用指令</h2><p>-n 表示namespace </p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">//查看pod信息\nkubectl <span class=\"token parameter variable\">--kubeconfig</span> ~/.kube/config get pod <span class=\"token parameter variable\">-n</span> mlops-system\n//查看部署情况\nkubectl <span class=\"token parameter variable\">--kubeconfig</span> ~/.kube/config get deploy <span class=\"token parameter variable\">-n</span> mlops-system\n//删除pod\nkubectl <span class=\"token parameter variable\">--kubeconfig</span> ~/.kube/config delete pod <span class=\"token parameter variable\">-n</span> mlops-system  dashboard-68748dddb8-ljkm9\n//查看：可以查看镜像信息\nkubectl <span class=\"token parameter variable\">--kubeconfig</span> ~/.kube/config get deploy <span class=\"token parameter variable\">-n</span> mlops-system dashboard <span class=\"token parameter variable\">-oyaml</span>\n//修改服务配置\nkubectl <span class=\"token parameter variable\">--kubeconfig</span> ~/.kube/config edit deploy <span class=\"token parameter variable\">-n</span> mlops-system dashboard\n//查看日志\nkubectl <span class=\"token parameter variable\">--kubeconfig</span> ~/.kube/config logs <span class=\"token parameter variable\">-f</span> <span class=\"token parameter variable\">-n</span> mlops-system dashboard-68748dddb8-s7w89   <span class=\"token punctuation\">(</span>pod_name<span class=\"token punctuation\">)</span>\n//查看status 变化\nkubectl <span class=\"token parameter variable\">--kubeconfig</span> ~/.kube/config describe pod <span class=\"token parameter variable\">-n</span> mlops-system dashboard-68748dddb8-s7w89\n//修改配置文件\nkubectl edit cm <span class=\"token parameter variable\">-n</span> mlops-system dashboard-conf<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">//maven打jar包<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h2 id=\"部署操作流程\"><a href=\"#部署操作流程\" class=\"headerlink\" title=\"部署操作流程\"></a>部署操作流程</h2><p>实际上就是走了一遍dockerfile</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token number\">1</span>:打jar包（package）\n<span class=\"token number\">2</span>:启动docker容器  <span class=\"token function\">docker</span> run <span class=\"token parameter variable\">-it</span> <span class=\"token parameter variable\">-d</span> dockerhub.mlops.jd.com/ai-platform/dashboard:0215-feat <span class=\"token punctuation\">(</span>拿到容器id<span class=\"token punctuation\">)</span>\n//imageName 上k8s用get yaml获取yaml文件 找到imageName\n<span class=\"token number\">3</span>: copy jar包到指定的 容器目录下 <span class=\"token function\">docker</span> <span class=\"token function\">cp</span> jar  容器id:目录\n//目录具体值可以通过dockerfile找到\n<span class=\"token number\">4</span>:将容器打成镜像 <span class=\"token function\">docker</span> commit 容器id 镜像名称\n<span class=\"token number\">5</span>: <span class=\"token function\">docker</span> push 镜像名称\n<span class=\"token number\">6</span>:修改yaml image信息 就会自动restart<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n\n<p>测试url：</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">http://mlops-test.jd.com/gw/dashboard/health/get<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h2 id=\"docker\"><a href=\"#docker\" class=\"headerlink\" title=\"docker\"></a>docker</h2><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">//获取container 和 image信息\n<span class=\"token function\">docker</span> <span class=\"token function\">ps</span>\n//登录远程镜像仓库\n<span class=\"token function\">docker</span> login dockerhub.mlops.jd.com\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n\n","text":"Kubernetes常用指令-n 表示namespace //查看pod信息 kubectl --kubeconfig ~/.kube/config get pod -n mlops-system //查看部署情况 kubectl --kubeconfig ~/.kube/con...","link":"","photos":[],"count_time":{"symbolsCount":"1.2k","symbolsTime":"1 mins."},"categories":[{"name":"learning","slug":"learning","count":11,"path":"api/categories/learning.json"}],"tags":[{"name":"K8s","slug":"K8s","count":1,"path":"api/tags/K8s.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#Kubernetes\"><span class=\"toc-text\">Kubernetes</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4\"><span class=\"toc-text\">常用指令</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%83%A8%E7%BD%B2%E6%93%8D%E4%BD%9C%E6%B5%81%E7%A8%8B\"><span class=\"toc-text\">部署操作流程</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#docker\"><span class=\"toc-text\">docker</span></a></li></ol></li></ol>","author":{"name":"Sihan Chen","slug":"blog-author","avatar":"/img/avatar.jpg","link":"/","description":"Had I not seen the sun, I could have borne the shade","socials":{"github":"https://github.com/sihan-chen-yes","twitter":"","stackoverflow":"https://stackoverflow.com/users/15780533/sihan","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"MarkupLanLearning","uid":"0aca10cea344fa1aabb90a273c674d58","slug":"MarkupLanguageLearning","date":"2023-03-02T08:38:00.000Z","updated":"2023-03-02T08:52:05.412Z","comments":true,"path":"api/articles/MarkupLanguageLearning.json","keywords":null,"cover":"/post/MarkupLanguageLearning/cover.jpg","text":"XMLLearningeXtensible Markup Language（XML） XML 被设计用来传输和存储数据，不用于表现和展示数据，HTML 则用来表现数据。 demo&lt;bookstore> &lt;book category=\"COOKING\"> &lt;tit...","link":"","photos":[],"count_time":{"symbolsCount":"3.1k","symbolsTime":"3 mins."},"categories":[{"name":"learning","slug":"learning","count":11,"path":"api/categories/learning.json"}],"tags":[{"name":"XML","slug":"XML","count":1,"path":"api/tags/XML.json"},{"name":"YAML","slug":"YAML","count":1,"path":"api/tags/YAML.json"},{"name":"JSON","slug":"JSON","count":1,"path":"api/tags/JSON.json"}],"author":{"name":"Sihan Chen","slug":"blog-author","avatar":"/img/avatar.jpg","link":"/","description":"Had I not seen the sun, I could have borne the shade","socials":{"github":"https://github.com/sihan-chen-yes","twitter":"","stackoverflow":"https://stackoverflow.com/users/15780533/sihan","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"MavenLearning","uid":"4250e66bce89b75e9ef464236ec9b3e1","slug":"MavenLearning","date":"2023-03-02T08:26:49.000Z","updated":"2023-03-02T08:29:01.092Z","comments":true,"path":"api/articles/MavenLearning.json","keywords":null,"cover":"/post/MavenLearning/cover.jpg","text":"MavenLearningMaven是一个Java项目管理工具，简单来说就是用来引包的 go这种较新的语言自带包管理工具，java也需要包管理工具 类似的包管理工具还有gradle 配置 conf&#x2F;settings.xml repository：本地的jar包存放位置 ...","link":"","photos":[],"count_time":{"symbolsCount":"6.3k","symbolsTime":"6 mins."},"categories":[{"name":"learning","slug":"learning","count":11,"path":"api/categories/learning.json"}],"tags":[{"name":"Java","slug":"Java","count":4,"path":"api/tags/Java.json"},{"name":"Maven","slug":"Maven","count":1,"path":"api/tags/Maven.json"}],"author":{"name":"Sihan Chen","slug":"blog-author","avatar":"/img/avatar.jpg","link":"/","description":"Had I not seen the sun, I could have borne the shade","socials":{"github":"https://github.com/sihan-chen-yes","twitter":"","stackoverflow":"https://stackoverflow.com/users/15780533/sihan","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}